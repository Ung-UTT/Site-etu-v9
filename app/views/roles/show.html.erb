<section class="content">
  <%= title(t('roles.name') + ' : ' + t('roles.default.'+@role.name, :default => @role.name)) %>

  <p>
    <strong><%= t('roles.users') %></strong> :
  </p>
  <ul>
    <% if @role.users.empty? %>
    <li><%= t('common.none') %></li>
    <% end %>
    <% @role.users.each do |user| %>
    <li>
      <%= link_to_user user %>
      <% if can? :update, user %>
        <%= form_for(@role, :url => disjoin_role_path(@role)) do |f| %>
          <%= f.submit 'X' %>
        <% end %>
      <% end %>
    </li>
    <% end %>
  </ul>

  <% if can? :update, @role %>
    <%= form_for(@role, :url => join_role_path(@role)) do |f| %>
      <ul class="fields">
        <li class="field">
          <%= select_tag :users, users_select(@first_users, @role.users), :class => 'users-chosen' %>
        </li>
        <li class="field">
          <%= f.submit t('common.add') %>
        </li>
      </ul>
    <% end %>
  <% end %>

  <%= render 'layouts/show_actions', {:ressource => @role} %>
</section>
